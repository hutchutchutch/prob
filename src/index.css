@tailwind base;
@tailwind components;
@tailwind utilities;

/* Design Tokens as CSS Variables */
:root {
  /* Colors - Using direct values instead of theme() */
  --color-background: #111827; /* gray-900 */
  --color-surface: #1f2937; /* gray-800 */
  --color-surface-hover: #374151; /* gray-700 */
  --color-border: #374151; /* gray-700 */
  --color-text-primary: #ffffff; /* white */
  --color-text-secondary: #9ca3af; /* gray-400 */
  
  /* Spacing */
  --space-xs: 0.25rem; /* 1 */
  --space-sm: 0.5rem; /* 2 */
  --space-md: 1rem; /* 4 */
  --space-lg: 1.5rem; /* 6 */
  --space-xl: 2rem; /* 8 */
  
  /* Border Radius */
  --radius-sm: 0.125rem;
  --radius-base: 0.25rem;
  --radius-md: 0.375rem;
  --radius-lg: 0.5rem;
  --radius-xl: 0.75rem;
  
  /* Transitions */
  --duration-fast: 150ms;
  --duration-base: 300ms;
  --duration-slow: 500ms;
  --ease-default: cubic-bezier(0.4, 0, 0.2, 1);
}

/* Base Styles */
@layer base {
  body {
    @apply bg-gray-900 text-white font-sans antialiased;
  }
  
  /* Focus Styles */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 focus:ring-offset-gray-900;
  }
  
  /* Scrollbar Styles */
  ::-webkit-scrollbar {
    @apply w-2 h-2;
  }
  
  ::-webkit-scrollbar-track {
    @apply bg-gray-800;
  }
  
  ::-webkit-scrollbar-thumb {
    @apply bg-gray-600 rounded-full;
  }
  
  ::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-500;
  }
}

/* Component Styles */
@layer components {
  /* Button Base */
  .btn {
    @apply inline-flex items-center justify-center px-6 py-3 font-medium rounded-md transition-all duration-base;
    @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
    min-width: 120px;
    height: 48px;
  }
  
  /* Button Variants */
  .btn-primary {
    @apply btn bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500;
    @apply hover:-translate-y-0.5 hover:shadow-lg active:translate-y-0 active:shadow-sm;
  }
  
  .btn-secondary {
    @apply btn bg-transparent text-gray-300 border border-gray-700;
    @apply hover:bg-gray-800 hover:border-gray-600 hover:text-white focus:ring-gray-500;
  }
  
  .btn-ghost {
    @apply btn bg-transparent text-gray-400 hover:bg-gray-800 hover:text-white focus:ring-gray-500;
  }
  
  /* Icon Button */
  .btn-icon {
    @apply w-10 h-10 p-0 inline-flex items-center justify-center rounded-lg;
    @apply bg-gray-800 text-gray-400 border border-gray-700;
    @apply hover:bg-gray-700 hover:text-white hover:border-gray-600;
    @apply transition-all duration-fast focus-ring;
    min-width: auto;
  }
  
  /* Input Base */
  .input {
    @apply w-full px-4 py-3 bg-gray-800 border-2 border-transparent rounded-lg;
    @apply text-white placeholder-gray-500 transition-all duration-base;
    @apply focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500/10;
  }
  
  /* Card */
  .card {
    @apply bg-gray-800 border border-gray-700 rounded-xl p-6;
    @apply transition-all duration-base hover:border-gray-600 hover:shadow-lg;
  }
  
  /* Badge */
  .badge {
    @apply inline-flex items-center gap-1 px-2 py-1 text-xs font-medium rounded-full;
  }
  
  .badge-critical {
    @apply bg-red-600 text-white;
  }
  
  .badge-warning {
    @apply bg-yellow-600 text-white;
  }
  
  .badge-info {
    @apply bg-blue-600 text-white;
  }
  
  /* Canvas Node Base */
  .canvas-node {
    @apply relative p-4 rounded-lg cursor-pointer transition-all duration-base;
    @apply shadow-lg hover:-translate-y-0.5 hover:shadow-xl;
  }
  
  /* Loading States */
  .skeleton {
    @apply bg-gradient-to-r from-gray-800 via-gray-700 to-gray-800;
    background-size: 200% 100%;
    animation: skeleton 1.5s ease-in-out infinite;
  }
  
  .spinner {
    @apply w-5 h-5 border-2 border-gray-700 border-t-blue-500 rounded-full;
    animation: spin 0.8s linear infinite;
  }
}

/* Utility Styles */
@layer utilities {
  /* Text Truncate */
  .truncate-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  /* Stagger Animation Delays */
  .stagger-1 { animation-delay: 0ms; }
  .stagger-2 { animation-delay: 150ms; }
  .stagger-3 { animation-delay: 300ms; }
  .stagger-4 { animation-delay: 450ms; }
  .stagger-5 { animation-delay: 600ms; }
  
  /* Gradient Backgrounds */
  .gradient-problem {
    @apply bg-gradient-to-br from-red-600 to-red-700;
  }
  
  .gradient-persona {
    @apply bg-gradient-to-br from-teal-500 to-teal-600;
  }
  
  .gradient-pain {
    @apply bg-gradient-to-br from-orange-500 to-orange-600;
  }
  
  .gradient-solution {
    @apply bg-gradient-to-br from-blue-500 to-blue-600;
  }
}

/* React Flow Overrides */
.react-flow__node {
  @apply bg-transparent border-0;
}

.react-flow__handle {
  @apply w-3 h-3 bg-gray-600 border-2 border-gray-900;
}

.react-flow__handle-connecting {
  @apply bg-blue-500;
}

.react-flow__edge-path {
  @apply stroke-gray-600 stroke-2;
}

.react-flow__edge.selected .react-flow__edge-path {
  @apply stroke-blue-500;
}

/* Animations */
@keyframes skeleton {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}